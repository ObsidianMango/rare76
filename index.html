<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Rare 76</title>
  <link href="https://fonts.googleapis.com/css2?family=UnifrakturMaguntia&display=swap" rel="stylesheet">
  <link rel="manifest" href="manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(() => console.log("Service Worker Registered"));
    }
  </script>
  <style>
    /* Dark Theme Base */
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      padding: 20px;
      max-width: 900px;
      margin: 0 auto;
      line-height: 1.5;
      background: #222;
      color: #ddd;
    }
    h1 { 
      font-family: 'UnifrakturMaguntia', cursive;
      text-align: center; 
      margin-bottom: 20px;
      color: #fff;
    }
    /* Controls: all on one line */
    #controls {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    #filterButtons, #typeFilterButtons, #sortDetailsContainer {
      display: flex;
      gap: 5px;
      flex-wrap: wrap;
      align-items: center;
    }
    .filter-button, .toggle-button, .sort-button {
      padding: 5px 10px;
      font-size: 14px;
      cursor: pointer;
      background: #555;
      color: #fff;
      border: none;
      border-radius: 5px;
      transition: background 0.3s ease;
    }
    .filter-button.active {
      background: #39FF14;
      color: #222;
    }
    /* Glowing Text Effect */
    .glowing {
      color: #39FF14;
      text-shadow: 0 0 5px #39FF14, 0 0 10px #39FF14;
    }
    .glowing--image {
      filter: drop-shadow(0 0 20px #39FF14) drop-shadow(0 0 30px #39FF14);
    }
    .glowing-title {
      color: #39FF14;
      text-shadow: 0 0 10px #39FF14, 0 0 20px #39FF14;
    }
    .mask-list {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .mask-item {
      width: 150px;
      text-align: center;
      border: 1px solid #444;
      padding: 10px;
      border-radius: 5px;
      background: #333;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .mask-item.obtained {
      border-color: #39FF14;
    }
    .mask-item:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
    }
    .mask-item img {
      max-width: 100%;
      height: 100px;
      object-fit: contain;
      display: block;
      margin: 0 auto 10px;
      border-radius: 3px;
    }
    .mask-item label {
      display: flex;
      height: 3.6em;
      align-items: center;
      justify-content: center;
      text-align: center;
      margin-bottom: 5px;
      font-weight: bold;
      pointer-events: none;
      color: #ddd;
    }
    .toggle-button {
      margin-top: 5px;
      padding: 5px 10px;
      font-size: 14px;
      cursor: pointer;
      background: #555;
      color: #fff;
      border: none;
      border-radius: 5px;
      transition: background 0.3s ease;
    }
    .toggle-button.active {
      background: #39FF14;
      color: #222;
    }
    .sort-button {
      min-width: 150px;
    }
    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 100;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.85);
      align-items: center;
      justify-content: center;
    }
    .modal-close {
      position: absolute;
      top: 20px;
      right: 30px;
      font-size: 40px;
      color: #fff;
      cursor: pointer;
      z-index: 101;
    }
    /* Desktop Modal Layout – original positioning for image */
    .modal-container {
      position: relative;
      width: 90vw;
      height: 90vh;
    }
    .modal-image-wrapper {
      width: 100%;
      height: 70vh;
    }
    .modal-image {
      width: 100%;
      height: 70vh;
      object-fit: contain;
      display: block;
      margin: 0 auto;
    }
    .modal-info-wrapper {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    .modal-info-item {
      position: absolute;
      font-size: 26px;
      text-shadow: 0 0 5px #000;
      background: rgba(0,0,0,0.4);
      padding: 8px 12px;
      border-radius: 5px;
      /* Default for Fasnacht masks */
      font-family: 'UnifrakturMaguntia', cursive;
      color: #fff;
    }
    .modal-year { top: 20px; left: 20px; color: #00aced; }
    .modal-rarity { bottom: 70px; left: 20px; }
    .modal-drop { bottom: 70px; right: 20px; color: #f39c12; }
    .modal-title { bottom: 10px; left: 50%; transform: translateX(-50%); font-size: 40px; text-align: center; }
    /* Copy Button Styles */
    #copyButton {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background: #555;
      color: #fff;
      border: none;
      border-radius: 5px;
    }
    #copyButton:hover {
      background: #777;
    }
    /* Mobile Modal Layout Override */
    @media (max-width: 600px) {
      .modal-container {
        display: flex;
        flex-direction: column;
        height: 100vh;
        align-items: center;
        justify-content: flex-start;
      }
      .modal-image-wrapper {
        width: 100%;
        height: 50vh;
        overflow: hidden;
      }
      .modal-image-wrapper img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
      .modal-info-wrapper {
        position: static;
        width: 100%;
        padding: 10px;
        background: #222;
        color: #ddd;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .modal-info-item {
        position: static;
        margin: 5px 0;
        font-size: 20px;
        text-shadow: none;
        background: none;
        padding: 0;
      }
    }
    /* Mobile Friendly Styles for Other Elements */
    @media (max-width: 600px) {
      .mask-item {
        width: 100%;
      }
    }
    @media (max-width: 600px) and (orientation: portrait) {
      .modal-container {
        width: 100vw;
        height: auto;
        padding: 10px;
        box-sizing: border-box;
      }
    }
  </style>
</head>
<body>
  <h1>Rare 76 - Fallout76 Rare Items </h1>
  <div style="text-align: center; font-family: Arial, sans-serif; color: #555; font-size: 1em; margin:0px;">
    If mobile, <em>use landscape mode for best viewing results.</em>
  </div>
  <br>
  <!-- Controls on one line -->
  <div id="controls">
    <div id="filterButtons">
      <button class="filter-button active" data-filter="all">All</button>
      <button class="filter-button" data-filter="glowing">Glowing</button>
      <button class="filter-button" data-filter="rare">Rare</button>
      <button class="filter-button" data-filter="uncommon">Uncommon</button>
      <button class="filter-button" data-filter="common">Common</button>
    </div>
    <div id="typeFilterButtons">
      <!-- Now we differentiate Fasnacht masks from others.
           Original Fasnacht masks have type "fasnacht".
           Any non-Fasnacht masks can be set to "headwear" later.
           Outfits remain in "outfits". -->
      <button class="filter-button active" data-type="all">All Types</button>
      <button class="filter-button" data-type="fasnacht">Fasnacht</button>
      <button class="filter-button" data-type="headwear">Headwear</button>
      <button class="filter-button" data-type="outfits">Outfits</button>
    </div>
    <div id="sortDetailsContainer">
      <button id="sortButton" class="sort-button">Sort: Name ▲</button>
      <button id="detailsToggle" class="toggle-button">Hide Details</button>
    </div>
  </div>
  
  <div class="mask-list" id="maskList">
    <!-- Items will be dynamically inserted here -->
  </div>
  
  <button id="copyButton">Copy Lists</button>
<!-- hitwebcounter Code START -->
  <center>
<a href="https://www.hitwebcounter.com" target="_blank">
<img src="https://hitwebcounter.com/counter/counter.php?page=19947266&style=0005&nbdigits=8&type=page&initCount=0" title="Counter Widget" Alt="Visit counter For Websites" border="0" /></a> 
  </center>

  <!-- Fullscreen Modal -->
  <div id="modal" class="modal" style="display:none;">
    <span id="modalClose" class="modal-close">&times;</span>
    <div class="modal-container">
      <div class="modal-image-wrapper">
        <img id="modalImg" class="modal-image" src="" alt="">
      </div>
      <div class="modal-info-wrapper">
        <div id="modalYear" class="modal-info-item modal-year"></div>
        <div id="modalRarity" class="modal-info-item modal-rarity"></div>
        <div id="modalDropRate" class="modal-info-item modal-drop"></div>
        <div id="modalTitle" class="modal-info-item modal-title"></div>
      </div>
    </div>
  </div>

  <script>
    // Animate text with a scrambling effect
    function animateText(element, finalText, duration = 800) {
      const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      let iterations = 0;
      const total = finalText.length;
      const interval = setInterval(() => {
        const displayed = finalText.split("").map((char, index) => {
          return index < iterations ? finalText[index] : letters[Math.floor(Math.random() * letters.length)];
        }).join("");
        element.textContent = displayed;
        iterations++;
        if (iterations > total) {
          clearInterval(interval);
          element.textContent = finalText;
        }
      }, duration / total);
    }
    
    // Helper to clean up titles
    function formatMaskTitle(title) {
      return title.replace(/Fallout\s*76/ig, '').replace(/in\s*Fo76/ig, '').trim();
    }
    
    // Sorting modes and state variables
    const sortModes = ["nameAsc", "nameDesc", "rarityAsc", "rarityDesc", "yearAsc", "yearDesc"];
    let sortModeIndex = 0;
    let currentSort = sortModes[sortModeIndex];
    let showDetails = true;
    
    const rarityOrder = { "glowing": 1, "rare": 2, "uncommon": 3, "common": 4 };
    
    // Full mask list:
    // Original Fasnacht masks now have type "fasnacht"
    // New non-Fasnacht items (if any other masks are added later) can be "headwear"
    // Outfits remain in "outfits"
    const maskData = [
      {
        "name": "Alien Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-alien-mask.webp",
        "year": 2024,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Beret",
        "url": "https://images.fallout.wiki/thumb/4/47/FO76_fasnacht_beret.png/155px-FO76_fasnacht_beret.png",
        "year": 2019,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Big Foot Mask",
        "url": "https://raw.githubusercontent.com/ObsidianMango/ObsidianMango/main/img/big.png",
        "year": 2025,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Blue Devil Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-blue-devil-mask.webp",
        "year": 2024,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Brahmin Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-brahmin-mask.webp",
        "year": 2021,
        "rarity": "rare",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Buffoon Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-buffoon-mask.webp",
        "year": 2021,
        "rarity": "rare",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Crazy Guy Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-crazy-guy-mask.webp",
        "year": 2020,
        "rarity": "rare",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Deathclaw Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-deathclaw-mask.webp",
        "year": 2020,
        "rarity": "rare",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Demon Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-demon-mask.webp",
        "year": 2020,
        "rarity": "rare",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Fiend Mask",
        "url": "https://images.fallout.wiki/thumb/e/ea/FO76_headwear_fasnacht_fiend.png/600px-FO76_headwear_fasnacht_fiend.png",
        "year": 2022,
        "rarity": "rare",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Giant Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-giant-mask.webp",
        "year": 2019,
        "rarity": "common",
        "dropRate": 20.0,
        "type": "fasnacht"
      },
      {
        "name": "Goblin Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-goblin-mask.webp",
        "year": 2019,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Abe Mask",
        "url": "https://raw.githubusercontent.com/ObsidianMango/ObsidianMango/main/img/abeglow.png",
        "year": 2025,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Alien Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-glowing-alien-mask.webp",
        "year": 2024,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Big Foot Mask",
        "url": "https://raw.githubusercontent.com/ObsidianMango/ObsidianMango/main/img/bigglow.png",
        "year": 2025,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Blue Devil Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-glowing-blue-devil-mask.webp",
        "year": 2024,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Honey Bee Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-glowing-honey-bee-mask.webp",
        "year": 2024,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Jackalope Mask",
        "url": "https://raw.githubusercontent.com/ObsidianMango/ObsidianMango/main/img/jackglow.png",
        "year": 2025,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Minotaur Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-glowing-minotaur-mask.webp",
        "year": 2024,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Pig Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-glowing-pig-mask.webp",
        "year": 2024,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Robot Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-glowing-robot-mask.webp",
        "year": 2024,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Scorchbeast Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-glowing-scorchbeast-mask-.webp",
        "year": 2024,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Scorchbeast Queen Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-glowing-scorchbeast-queen-mask.webp",
        "year": 2024,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Turkey Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-glowing-turkey-mask.webp",
        "year": 2024,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Unicorn Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-glowing-unicorn-mask.webp",
        "year": 2024,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Glowing Veggie Man Mask",
        "url": "https://raw.githubusercontent.com/ObsidianMango/ObsidianMango/main/img/vegglow.png",
        "year": 2025,
        "rarity": "glowing",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Hag Mask",
        "url": "https://images.fallout.wiki/b/b0/FO76_headwear_fasnacht_hag.png",
        "year": 2022,
        "rarity": "rare",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Honey Bee Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-honey-bee-mask.webp",
        "year": 2024,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Jackalope Mask",
        "url": "https://raw.githubusercontent.com/ObsidianMango/ObsidianMango/main/img/jack.png",
        "year": 2025,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Jester Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-jester-mask.webp",
        "year": 2019,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Loon Mask",
        "url": "https://raw.githubusercontent.com/ObsidianMango/ObsidianMango/main/img/loon.png",
        "year": 2024,
        "rarity": "rare",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Man Mask",
        "url": "https://images.fallout.wiki/b/be/Faschnacht_Man_Mask.png",
        "year": 2019,
        "rarity": "common",
        "dropRate": 20.0,
        "type": "fasnacht"
      },
      {
        "name": "Minotaur Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-minotaur-mask.webp",
        "year": 2024,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Owl Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-owl-mask.webp",
        "year": 2019,
        "rarity": "common",
        "dropRate": 20.0,
        "type": "fasnacht"
      },
      {
        "name": "Pig Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-pig-mask.webp",
        "year": 2024,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Raven Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-raven-mask.webp",
        "year": 2020,
        "rarity": "rare",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Robot Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-robot-mask.webp",
        "year": 2024,
        "rarity": "common",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Scorchbeast Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-scorchbeast-mask.webp",
        "year": 2024,
        "rarity": "uncommon",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Scorchbeast Queen Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-scorchbeast-queen-mask.webp",
        "year": 2024,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Skull Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-skull-mask.webp",
        "year": 2019,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Soldier Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-soldier-mask.webp",
        "year": 2019,
        "rarity": "common",
        "dropRate": 20.0,
        "type": "fasnacht"
      },
      {
        "name": "Sun Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-sun-mask.webp",
        "year": 2019,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Toothy Man Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-toothy-man-mask.webp",
        "year": 2019,
        "rarity": "common",
        "dropRate": 20.0,
        "type": "fasnacht"
      },
      {
        "name": "Turkey Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-turkey-mask.webp",
        "year": 2024,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Unicorn Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-unicorn-mask.webp",
        "year": 2024,
        "rarity": "uncommon",
        "dropRate": 4.4,
        "type": "fasnacht"
      },
      {
        "name": "Winter Man Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-winter-man-mask.webp",
        "year": 2021,
        "rarity": "rare",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Winter Man T-45 Helmet",
        "url": "https://images.fallout.wiki/thumb/c/c8/FO76WL_Father_Winter_helmet.png/155px-FO76WL_Father_Winter_helmet.png",
        "year": 2021,
        "rarity": "rare",
        "dropRate": 0.2,
        "type": "fasnacht"
      },
      {
        "name": "Witch Mask",
        "url": "https://www.falloutbuilds.com/wp-content/uploads/sites/41/fallout-76-fasnacht-witch-mask.webp",
        "year": 2019,
        "rarity": "common",
        "dropRate": 20.0,
        "type": "fasnacht"
      },
      // New non-Fasnacht items: grouped as outfits

  {
    "name": "Blood Eagle Jacket Jeans",
    "url": "img/bloodeaglejacketjeans.png",
    "year": 2020,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Secret Operative Underarmor",
    "url": "img/secretoperativeunderarmor.png",
    "year": 2020,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Brotherhood Special Ops Gas Mask",
    "url": "img/brotherhoodspecialopsgasmask.png",
    "year": 2020,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "headwear"
  },
  {
    "name": "Clean Spacesuit",
    "url": "img/cleanspacesuit.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Clean Spacesuit Helmet",
    "url": "img/cleanspacesuithelmet.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "headwear"
  },
  {
    "name": "Fishermans Overalls",
    "url": "img/fishermansoveralls.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Deathclaw Hunter Hat",
    "url": "img/deathclawhunterhat.png",
    "year": 2020,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "headwear"
  },
  {
    "name": "Deathclaw Hunter",
    "url": "img/deathclawhunter.png",
    "year": 2020,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Cave Diving Suit",
    "url": "img/divingsuit.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Grafton Monster",
    "url": "img/graftonmonster.png",
    "year": 2020,
    "rarity": "rare",
    "dropRate": 0,
    "type": "headwear"
  },
  {
    "name": "Forest Camo Jumpsuit",
    "url": "img/forestcamojumpsuit.png",
    "year": 2018,
    "rarity": "rare",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Winter Jacket and Jeans",
    "url": "img/winterjacket.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Straightjacket Clean",
    "url": "img/straightjacketclean.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Chally Moomoo",
    "url": "img/challymoomoo.png",
    "year": 2020,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Chally Moomoo Helmet",
    "url": "img/challymoomoohelmet.png",
    "year": 2020,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "headwear"
  },
  {
    "name": "Garrahan Forman Helmet",
    "url": "img/GarrahanFormanHelmet.png",
    "year": 2020,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "headwear"
  },
  {
    "name": "Garrahan Foreman",
    "url": "img/garrahanforeman.png",
    "year": 2020,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Reclaimed Deep Mining Mask",
    "url": "img/reclaimeddeepminingmask.png",
    "year": 2020,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "headwear"
  },
  {
    "name": "Responder Fireman",
    "url": "img/responderfireman.png",
    "year": 2018,
    "rarity": "rare",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Responder Fireman Helmet",
    "url": "img/responderfiremanhelmet.png",
    "year": 2018,
    "rarity": "rare",
    "dropRate": 0,
    "type": "headwear"
  },
  {
    "name": "Leather Coat",
    "url": "img/leathercoat.png",
    "year": 2018,
    "rarity": "rare",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "BOS Jumpsuit",
    "url": "img/BOSjumpsuit.png",
    "year": 2018,
    "rarity": "rare",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "White Powder Jumpsuit",
    "url": "img/whitepowderjumpsuit.png",
    "year": 2018,
    "rarity": "rare",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Asylum Worker Pink",
    "url": "img/asylumworkerpink.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Asylum Worker Green",
    "url": "img/asylumworkergreen.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Asylum Worker Brown",
    "url": "img/asylumworkerbrown.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Asylum Worker Blue",
    "url": "img/asylumworkerblue.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Asylum Worker Forest",
    "url": "img/asylumworkerforest.png",
    "year": 2018,
    "rarity": "rare",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Asylum Worker Red",
    "url": "img/asylumworkerred.png",
    "year": 2018,
    "rarity": "rare",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Asylum Worker Yellow",
    "url": "img/asylumworkeryellow.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Skull Lord Blood Eagle Helmet",
    "url": "img/SkullLordBloodEaglehelmet.png",
    "year": 2021,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "headwear"
  },
  {
    "name": "Skull Lord Blood Eagle",
    "url": "img/SkullLordBloodEagle.png",
    "year": 2021,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Blue Ridge Caravan Gas Mask",
    "url": "img/blueridgecaravangasmask.png",
    "year": 2020,
    "rarity": "rare",
    "dropRate": 0,
    "type": "headwear"
  },
  {
    "name": "Blue Ridge Caravan",
    "url": "img/blueridgecaravan.png",
    "year": 2020,
    "rarity": "rare",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Traveling Leather",
    "url": "img/travelingleather.png",
    "year": 2018,
    "rarity": "rare",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Grey Fishermans Overalls",
    "url": "img/greyfishermansoveralls.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Tattered Field Jacket",
    "url": "img/tatteredfieldjacket.png",
    "year": 2018,
    "rarity": "rare",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Longshoreman",
    "url": "img/longshoreman.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "USA Mask",
    "url": "img/USAmask.png",
    "year": 2018,
    "rarity": "rare",
    "dropRate": 0,
    "type": "headwear"
  },
        {
    "name": "Protoype Hazmat Suit",
    "url": "img/protoypehazmat.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "Brotherhood Special Ops",
    "url": "img/brotherhoodspecialops.png",
    "year": 2018,
    "rarity": "uncommon",
    "dropRate": 0,
    "type": "outfits"
  },
  {
    "name": "FSA Mask",
    "url": "img/FSAmask.png",
    "year": 2018,
    "rarity": "rare",
    "dropRate": 0,
    "type": "headwear"
  }
    ];
    
    // Load saved checklist state
    let savedData = JSON.parse(localStorage.getItem("fasnachtMasks") || "[]");
    if (savedData.length) {
      maskData.forEach((mask, i) => {
        if (savedData[i]) mask.obtained = savedData[i].obtained;
      });
    }
    
    function saveChecklist() {
      localStorage.setItem("fasnachtMasks", JSON.stringify(maskData));
    }
    
    let activeRarityFilter = "all";
    let activeTypeFilter = "all";
    
    function renderMaskList() {
      const maskList = document.getElementById("maskList");
      maskList.innerHTML = "";
      let filteredData = maskData.filter(item =>
        (activeRarityFilter === "all" || item.rarity.toLowerCase() === activeRarityFilter) &&
        (activeTypeFilter === "all" || item.type.toLowerCase() === activeTypeFilter)
      );
      
      if(currentSort === "nameAsc") {
        filteredData.sort((a, b) => formatMaskTitle(a.name).localeCompare(formatMaskTitle(b.name)));
      } else if(currentSort === "nameDesc") {
        filteredData.sort((a, b) => formatMaskTitle(b.name).localeCompare(formatMaskTitle(a.name)));
      } else if(currentSort === "rarityAsc") {
        filteredData.sort((a, b) => (rarityOrder[a.rarity.toLowerCase()] || 99) - (rarityOrder[b.rarity.toLowerCase()] || 99));
      } else if(currentSort === "rarityDesc") {
        filteredData.sort((a, b) => (rarityOrder[b.rarity.toLowerCase()] || 99) - (rarityOrder[a.rarity.toLowerCase()] || 99));
      } else if(currentSort === "yearAsc") {
        filteredData.sort((a, b) => a.year - b.year);
      } else if(currentSort === "yearDesc") {
        filteredData.sort((a, b) => b.year - a.year);
      }
      
      filteredData.forEach((mask, index) => {
        maskList.appendChild(createMaskItem(mask, index));
      });
    }
    
    function createMaskItem(mask, index) {
      const container = document.createElement("div");
      container.className = "mask-item";
      if(mask.obtained) container.classList.add("obtained");
    
      const img = document.createElement("img");
      img.src = mask.url;
      img.alt = mask.name;
      img.addEventListener("click", (e) => {
        e.stopPropagation();
        openModal(mask);
      });
    
      if(showDetails) {
        const label = document.createElement("label");
        label.textContent = formatMaskTitle(mask.name);
        // Apply glowing only for Fasnacht masks that are glowing
        if(mask.type === "fasnacht" && mask.rarity.toLowerCase() === "glowing") {
          label.classList.add("glowing");
        }
    
        const details = document.createElement("div");
        details.style.fontSize = "12px";
        details.innerHTML = "Year: " + mask.year + "<br>" + (mask.type === "fasnacht" ? "Drop: " + mask.dropRate + "%" : "");
    
        container.appendChild(label);
        container.appendChild(details);
      }
    
      const toggleButton = document.createElement("button");
      toggleButton.className = "toggle-button";
      toggleButton.textContent = mask.obtained ? "Obtained" : "Not Obtained";
      if(mask.obtained) toggleButton.classList.add("active");
      toggleButton.addEventListener("click", (e) => {
        e.stopPropagation();
        mask.obtained = !mask.obtained;
        toggleButton.textContent = mask.obtained ? "Obtained" : "Not Obtained";
        toggleButton.classList.toggle("active", mask.obtained);
        container.classList.toggle("obtained", mask.obtained);
        saveChecklist();
      });
    
      container.appendChild(img);
      container.appendChild(toggleButton);
    
      container.addEventListener("click", () => {
        openModal(mask);
      });
    
      return container;
    }
    
    function openModal(mask) {
      const modal = document.getElementById("modal");
      const modalImg = document.getElementById("modalImg");
      modal.style.display = "flex";
      modalImg.src = mask.url;
      modalImg.alt = mask.name;
      
      animateText(document.getElementById("modalYear"), "  " + mask.year, 800);
      // Only show drop rate for Fasnacht masks
      if(mask.type === "fasnacht"){
        animateText(document.getElementById("modalDropRate"), "Drop Rate: " + mask.dropRate + "%", 1200);
      } else {
        document.getElementById("modalDropRate").textContent = "";
      }
      // Make rarity uppercase
      animateText(document.getElementById("modalRarity"), mask.rarity.toUpperCase(), 800);
      animateText(document.getElementById("modalTitle"), formatMaskTitle(mask.name), 800);
      
      const modalRarity = document.getElementById("modalRarity");
      let rarity = mask.rarity.toLowerCase();
      let rarityColor = "#fff";
      if(rarity === "rare") {
         rarityColor = "#ff5555";
      } else if(rarity === "uncommon") {
         rarityColor = "#55ff55";
      } else if(rarity === "glowing") {
         rarityColor = "#39FF14";
      } else if(rarity === "common") {
         rarityColor = "#ffffff";
      }
      modalRarity.style.color = rarityColor;
      
      // Set modal font based on type:
      if(mask.type === "fasnacht") {
        document.getElementById("modalYear").style.fontFamily = "'UnifrakturMaguntia', cursive";
        document.getElementById("modalRarity").style.fontFamily = "'UnifrakturMaguntia', cursive";
        document.getElementById("modalDropRate").style.fontFamily = "'UnifrakturMaguntia', cursive";
        document.getElementById("modalTitle").style.fontFamily = "'UnifrakturMaguntia', cursive";
      } else {
        document.getElementById("modalYear").style.fontFamily = "Arial, sans-serif";
        document.getElementById("modalRarity").style.fontFamily = "Arial, sans-serif";
        document.getElementById("modalDropRate").style.fontFamily = "Arial, sans-serif";
        document.getElementById("modalTitle").style.fontFamily = "Arial, sans-serif";
      }
      
      if(rarity === "glowing") {
        document.getElementById("modalYear").classList.add("glowing");
        document.getElementById("modalDropRate").classList.add("glowing");
        document.getElementById("modalRarity").classList.add("glowing");
        document.getElementById("modalTitle").classList.add("glowing");
        modalImg.classList.add("glowing--image");
        document.getElementById("modalTitle").classList.add("glowing-title");
      } else {
        document.getElementById("modalYear").classList.remove("glowing");
        document.getElementById("modalDropRate").classList.remove("glowing");
        document.getElementById("modalRarity").classList.remove("glowing");
        document.getElementById("modalTitle").classList.remove("glowing");
        modalImg.classList.remove("glowing--image");
        document.getElementById("modalTitle").classList.remove("glowing-title");
      }
    }
    
    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }
    
    document.getElementById("modalClose").addEventListener("click", closeModal);
    document.getElementById("modal").addEventListener("click", (e) => {
      if (e.target === e.currentTarget) closeModal();
    });
    
    // Rarity filter buttons
    document.querySelectorAll("#filterButtons .filter-button").forEach(button => {
      button.addEventListener("click", () => {
        activeRarityFilter = button.getAttribute("data-filter");
        document.querySelectorAll("#filterButtons .filter-button").forEach(btn => btn.classList.remove("active"));
        button.classList.add("active");
        renderMaskList();
      });
    });
    
    // Type filter buttons
    document.querySelectorAll("#typeFilterButtons .filter-button").forEach(button => {
      button.addEventListener("click", () => {
        activeTypeFilter = button.getAttribute("data-type");
        document.querySelectorAll("#typeFilterButtons .filter-button").forEach(btn => btn.classList.remove("active"));
        button.classList.add("active");
        renderMaskList();
      });
    });
    
    // Sort button
    document.getElementById("sortButton").addEventListener("click", () => {
      sortModeIndex = (sortModeIndex + 1) % sortModes.length;
      currentSort = sortModes[sortModeIndex];
      let sortText = "";
      if(currentSort === "nameAsc") sortText = "Name ▲";
      else if(currentSort === "nameDesc") sortText = "Name ▼";
      else if(currentSort === "rarityAsc") sortText = "Rarity ▲";
      else if(currentSort === "rarityDesc") sortText = "Rarity ▼";
      else if(currentSort === "yearAsc") sortText = "Year ▲";
      else if(currentSort === "yearDesc") sortText = "Year ▼";
      document.getElementById("sortButton").textContent = "Sort: " + sortText;
      renderMaskList();
    });
    
    // Details toggle button
    document.getElementById("detailsToggle").addEventListener("click", () => {
      showDetails = !showDetails;
      document.getElementById("detailsToggle").textContent = showDetails ? "Hide Details" : "Show Details";
      renderMaskList();
    });
    
    // Copy checklist button
    document.getElementById("copyButton").addEventListener("click", () => {
      const ownedItems = [];
      const unownedItems = [];
      maskData.forEach(mask => {
        const formattedName = formatMaskTitle(mask.name);
        if (mask.obtained) ownedItems.push(formattedName);
        else unownedItems.push(formattedName);
      });
      const textToCopy =
        "Owned Items:\n" + (ownedItems.length ? ownedItems.join("\n") : "None") +
        "\n\nUnowned Items:\n" + (unownedItems.length ? unownedItems.join("\n") : "None");
      navigator.clipboard.writeText(textToCopy)
        .then(() => alert("Copied to clipboard!"))
        .catch(() => alert("Failed to copy."));
    });
    
    renderMaskList();
  </script>

</body>
</html>
